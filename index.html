<html>
	<head>
		<h1>Mail Application</h1>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser
        console.log(window.geemails);  //Array of Objects
        

        	function getRandomDate()
            {
    		var year = 2013;
    		var month = Math.floor(Math.random() * 12) + 1;
    		var day = Math.floor(Math.random() * 30) + 1;
   			var hours = Math.floor(Math.random() * 12) + 1;
    		var minutes = Math.floor(Math.random() * 59) + 1;
    		return new Date(year, month, day, hours, minutes);
            }
            


/*Testing code:*/

    function loadGeeMails(){
    for (var i = 0; i < 10; i++){
    var message = generateMessage();
    window.geemails.push(message);
        }
    }

  function generateMessage(date){
    var message = {};
    message.date = date || getRandomDate();
    message.subject = getRandomElement(subject);
    message.sender = getRandomElement(sender);
    message.body = getRandomElement(body);
    return message;
  }

  function getRandomElement(arr){
    return arr[Math.floor(Math.random() * arr.length)];
  }

  function getNewMessage(){
    var now = new Date();
    return generateMessage(now);
  }

/*Testing code^*/



        var count = 0;
       

        for(var i =0; i<geemails.length; i++){

        	console.log(geemails[i].sender);
            console.log(geemails[i].subject);
            console.log(geemails[i].body);
            console.log(getRandomDate(2013,Math.floor(Math.random() * 12) + 1,Math.floor(Math.random() * 30) + 1,Math.floor(Math.random() * 12) + 1,Math.floor(Math.random() * 59) + 1)); 


			var divDate = document.createElement("div");
            divDate.className = "dDate";
            divDate.innerHTML = getRandomDate();
            main.appendChild(divDate);

        	var divSend = document.createElement("div");
            divSend.className = "dSend";
            divSend.innerHTML = geemails[i].sender;
            main.appendChild(divSend);


            var divSubj = document.createElement("div");
            divSubj.className = "dSubj";
            divSubj.innerHTML = geemails[i].subject;
            main.appendChild(divSubj);

           var divBody = document.createElement("div");
            divBody.className = "dBody";
            divBody.innerHTML = geemails[i].body;
            divBody.style.display = "none";
            divSubj.appendChild(divBody);
            count ++;
        }
        var para = document.createElement("p");
        var pCount = document.createTextNode("Inbox: " + count);
        para.appendChild(pCount);
        document.body.appendChild(para);




        var parentElem = document.getElementsByClassName("dSubj");
        for(var i = 0; i<parentElem.length; i++)
        {
            parentElem[i].addEventListener("click", showBody);
        }
        function showBody()
        { 
           
           var paraBody = this.querySelectorAll(".dBody")[0];
            
            if(paraBody.style.display === "none")
            {
                paraBody.style.display = "block";
            }
            else
            {
                paraBody.style.display = "none";
            }
        }



/*Testing code*/


          for(var j = 0; j <geemails.length;j++)
        {
            var myVar = setInterval(getNewMessage, 1000);



        }

/*Testing code^*/



      };
    </script>
	</head>
	<body>
		<div class="container" id="main">		
        
        </div>
	</body>
</html>